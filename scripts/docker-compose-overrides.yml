services:
  keycloak:
    volumes:
      - "${KEYCLOAK_BINARIES_PATH:-keycloak-binaries}/themes:/opt/keycloak/providers"

  oe.openelis.org:
    volumes:
      - "${OPENELIS_TRUST_STORE:-key_trust-store-volume}:/etc/openelis-global"
      - "${OPENELIS_CONFIG_PATH}/plugins/:/var/lib/openelis-global/plugins"
      - "${OPENELIS_CONFIG_PATH}/properties/SystemConfiguration.properties:/var/lib/openelis-global/properties/SystemConfiguration.properties"
      - "${OPENELIS_CONFIG_PATH}/analyzer/analyzer-test-map.csv:/var/lib/openelis-global/analyzer/analyzer-test-map.csv"
      - "${OPENELIS_CONFIG_PATH}/odoo/odoo-test-product-mapping.csv:/var/lib/openelis-global/odoo/odoo-test-product-mapping.csv"
      - "${OPENELIS_CONFIG_PATH}/ocl:/var/lib/openelis-global/ocl"
      - "${OPENELIS_CONFIG_PATH}/programs/:/var/lib/openelis-global/programs"
      - "${OPENELIS_CONFIG_PATH}/configuration:/var/lib/openelis-global/configuration"
      - "${OPENELIS_CONFIG_PATH}/menu/menu_config.json:/var/lib/openelis-global/menu/menu_config.json"
      - "${OPENELIS_LUCENE_INDEX:-lucene_index-vol}:/var/lib/lucene_index"

  env-substitution:
    environment:
      - KC_SMTP_HOST=${KC_SMTP_HOST}
      - KC_SMTP_PORT=${KC_SMTP_PORT}
      - KC_SMTP_FROM=${KC_SMTP_FROM}
      - KC_SMTP_FROM_DISPLAY_NAME=${KC_SMTP_FROM_DISPLAY_NAME}
      - KC_SMTP_TLS=${KC_SMTP_TLS}
      - KC_SMTP_SSL=${KC_SMTP_SSL}
      - KC_SMTP_AUTH=${KC_SMTP_AUTH}
      - KC_SMTP_REPLY_TO=${KC_SMTP_REPLY_TO}
      - KC_SMTP_REPLY_TO_DISPLAY_NAME=${KC_SMTP_REPLY_TO_DISPLAY_NAME}

volumes:
  keycloak-binaries: ~
